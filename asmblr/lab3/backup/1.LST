Microsoft (R) Macro Assembler Version 5.00                  4/7/15 20:26:47
                                                             Page     1-1


       1				.model small 
       2 0100				.stack 256 
       3 0000				.data 
       4				Node struc ;задаем шаблон структуры 
       5 0000  0004[			namex db 4 dup (0ffh) ;массив из 4 Ячее
					к размером 1 байт с одинаковым содержим
					ым (в программе не используетсЯ) 
       6	   FF			
       7			 ]	
       8				
       9 0004  0002[			field1 dw 2 dup (0) ;массив относитсЯ к
					 структурам Ђ0-Ђ3, в него записываютсЯ 
					смещениЯ структур 
      10	   0000			
      11			 ]	
      12				
      13 0008				node ends ;конец объЯвлениЯ шаблона стр
					уктуры 
      14 0000				Data1 segment ;первый сегмент данных (н
					еобходим длЯ заданиЯ 1, используетсЯ в 
					первом сегменте кодов) 
      15 0000  ??			I_struc db ? ;по условию этот массив до
					лжен использоватьсЯ длЯ индексации, но 
					он у менЯ не задействован 
      16 0001  0004[			A0 Node <> ;пустаЯ структура 
      17	   FF			
      18			 ]	
      19 0005  0002[			
      20	   0000			
      21			 ]	
      22				
      23 0009  0002[			A1 Node 2 dup (<>) ;структура из 2 один
					аковых элементов 
      24	0004[			
      25	    FF			
      26			]	
      27	0002[			
      28	    0000		
      29			]	
      30			 ]	
      31				
      32 0019  0004[			A2 Node 4 dup (<>) ;структура из 4 один
					аковых элементов 
      33	0004[			
      34	    FF			
      35			]	
      36	0002[			
      37	    0000		
      38			]	
      39			 ]	
      40				
      41 0039  0008[			A3 Node 8 dup (<>) ;структура из 8 один
					аковых элементов 
      42	0004[			
Microsoft (R) Macro Assembler Version 5.00                  4/7/15 20:26:47
                                                             Page     1-2


      43	    FF			
      44			]	
      45	0002[			
      46	    0000		
      47			]	
      48			 ]	
      49				
      50 0079				Data1 ends ;конец объЯвлениЯ первого се
					гмента данных 
      51 0000				Data2 segment ;второй сегмент данных (н
					еобходим длЯ заданиЯ 2, используетсЯ во
					 втором сегменте кодов) 
      52 0000  0004[			B0 Node <> ;пустаЯ структура 
      53	   FF			
      54			 ]	
      55 0004  0002[			
      56	   0000			
      57			 ]	
      58				
      59 0008  0002[			B1 Node 2 dup (<>);структура из 2 одина
					ковых элементов 
      60	0004[			
      61	    FF			
      62			]	
      63	0002[			
      64	    0000		
      65			]	
      66			 ]	
      67				
      68 0018  0004[			B2 Node 4 dup (<>);структура из 4 одина
					ковых элементов 
      69	0004[			
      70	    FF			
      71			]	
      72	0002[			
      73	    0000		
      74			]	
      75			 ]	
      76				
      77 0038  0008[			B3 Node 8 dup (<>);структура из 8 одина
					ковых элементов 
      78	0004[			
      79	    FF			
      80			]	
      81	0002[			
      82	    0000		
      83			]	
      84			 ]	
      85				
      86 0078				Data2 ends ;конец объЯвлениЯ второго се
					гмента данных 
      87 0000				.code 
      88 0000				code1: ; первый сегмент кодов (перваЯ ч
					асть лабораторной работы) 
Microsoft (R) Macro Assembler Version 5.00                  4/7/15 20:26:47
                                                             Page     1-3


      89				;помещаем смещение элементов структуры 
					A1 в поле field1 массива структур A0 
      90 0000  B8 ---- R			mov	ax,data1 ;помещаем в ax
					 исходные данные о структурах сегмента 
					Data1 
      91 0003  8E D8				mov	ds,ax ;эти данные должн
					ы быть в сегментном регистре ds 
      92 0005  33 C0				xor	ax,ax ;обнуление ax  
      93 0007  B9 0002				mov	cx,length A1 ;помещаем 
					в счетчик размер структуры, из которой 
					будем перемещать элементы 
      94 000A  BE 0000				mov	si,0 ;устанавливаем инд
					екс начального элемента в cx  
      95 000D				CA0:  
      96 000D  B7 09				mov bh, offset A1 ;помещаем сме
					щение элемента структуры в bh 
      97 000F  88 BC 0005 R			mov field1.A0[si],bh ;помещаем 
					в массив целевой структуры необходимую 
					структуру 
1.ASM(31): warning A4057: Illegal size for operand
      98 0013  FF 06 0009 R			inc A1 ;сдвигаемсЯ по структуре
					 на следующий элемент 
1.ASM(32): warning A4057: Illegal size for operand
      99				;mov I_struc[si],si ; помещаем индекс э
					лемента в массив длЯ индексов (необходи
					мо по условию) 
     100 0017  46				inc si ;сдвигаем индекс 
     101 0018  E2 F3				loop CA0 
     102				 
     103				;помещаем смещение элементов структуры 
					A2 в поле field1 массива структур A1
						 
     104 001A  B9 0004				mov	cx,length A2 ;помещаем 
					в счетчик размер структуры, из которой 
					будем перемещать элементы 
     105 001D  BE 0000				mov	si,0 ;устанавливаем инд
					екс начального элемента в cx  
     106 0020				CA1:  
     107 0020  B7 19				mov bh, offset A2 ;помещаем сме
					щение элемента структуры в bh 
     108 0022  88 BC 000D R			mov field1.A1[si],bh ;помещаем 
					в массив целевой структуры необходимую 
					структуру 
1.ASM(42): warning A4057: Illegal size for operand
     109 0026  FF 06 0019 R			inc A2 ;сдвигаемсЯ по структуре
					 на следующий элемент 
1.ASM(43): warning A4057: Illegal size for operand
     110				;mov I_struc[si],si ; помещаем индекс э
					лемента в массив длЯ индексов (необходи
					мо по условию) 
     111 002A  46				inc si ;сдвигаем индекс 
     112 002B  E2 F3				loop CA1 
     113				 
     114				;помещаем смещение элементов структуры 
Microsoft (R) Macro Assembler Version 5.00                  4/7/15 20:26:47
                                                             Page     1-4


					A3 в поле field1 массива структур A2
						 
     115 002D  B9 0008				mov	cx,length A3 ;помещаем 
					в счетчик размер структуры, из которой 
					будем перемещать элементы 
     116 0030  BE 0000				mov	si,0 ;устанавливаем инд
					екс начального элемента в cx  
     117 0033				CA2: 
     118 0033  B7 39				mov bh, offset A3 ;помещаем сме
					щение элемента структуры в bh 
     119 0035  88 BC 001D R			mov field1.A2[si],bh ;помещаем 
					в массив целевой структуры необходимую 
					структуру 
1.ASM(53): warning A4057: Illegal size for operand
     120 0039  FF 06 0039 R			inc A3 ;сдвигаемсЯ по структуре
					 на следующий элемент 
1.ASM(54): warning A4057: Illegal size for operand
     121				;mov I_struc[si],si ; помещаем индекс э
					лемента в массив длЯ индексов (необходи
					мо по условию) 
     122 003D  46				inc si ;сдвигаем индекс 
     123 003E  E2 F3				loop CA2 
     124 0040				end code1 ; конец первого сегмента кодо
					в 
Microsoft (R) Macro Assembler Version 5.00                  4/7/15 20:26:47
                                                             Symbols-1


Structures and Records:

                N a m e                 Width   # fields
                                        Shift   Width   Mask    Initial

NODE . . . . . . . . . . . . . .  	0008	0002
  NAMEX  . . . . . . . . . . . .  	0000
  FIELD1 . . . . . . . . . . . .  	0004

Segments and Groups:

                N a m e         	Length	 Align	Combine Class

DATA1  . . . . . . . . . . . . .  	0079	PARA	NONE	
DATA2  . . . . . . . . . . . . .  	0078	PARA	NONE	
DGROUP . . . . . . . . . . . . .  	GROUP
  _DATA  . . . . . . . . . . . .  	0000	WORD	PUBLIC	'DATA'
  STACK  . . . . . . . . . . . .  	0100	PARA	STACK	'STACK'
_TEXT  . . . . . . . . . . . . .  	0040	WORD	PUBLIC	'CODE'

Symbols:            

                N a m e         	Type	 Value	 Attr

A0 . . . . . . . . . . . . . . .  	L QWORD	0001	DATA1
A1 . . . . . . . . . . . . . . .  	L QWORD	0009	DATA1	Length = 0002
A2 . . . . . . . . . . . . . . .  	L QWORD	0019	DATA1	Length = 0004
A3 . . . . . . . . . . . . . . .  	L QWORD	0039	DATA1	Length = 0008

B0 . . . . . . . . . . . . . . .  	L QWORD	0000	DATA2
B1 . . . . . . . . . . . . . . .  	L QWORD	0008	DATA2	Length = 0002
B2 . . . . . . . . . . . . . . .  	L QWORD	0018	DATA2	Length = 0004
B3 . . . . . . . . . . . . . . .  	L QWORD	0038	DATA2	Length = 0008

CA0  . . . . . . . . . . . . . .  	L NEAR	000D	_TEXT
CA1  . . . . . . . . . . . . . .  	L NEAR	0020	_TEXT
CA2  . . . . . . . . . . . . . .  	L NEAR	0033	_TEXT
CODE1  . . . . . . . . . . . . .  	L NEAR	0000	_TEXT

I_STRUC  . . . . . . . . . . . .  	L BYTE	0000	DATA1

@CODE  . . . . . . . . . . . . .  	TEXT  _TEXT		
@CODESIZE  . . . . . . . . . . .  	TEXT  0		
@DATASIZE  . . . . . . . . . . .  	TEXT  0		
@FILENAME  . . . . . . . . . . .  	TEXT  1		

Microsoft (R) Macro Assembler Version 5.00                  4/7/15 20:26:47
                                                             Symbols-2



     58 Source  Lines
     58 Total   Lines
     32 Symbols

  48502 + 418810 Bytes symbol space free

      6 Warning Errors
      0 Severe  Errors
